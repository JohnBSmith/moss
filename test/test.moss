
use sys: cmd

function test_extern(path)
  return fn test|name|
    print(name)
    cmd(path,[name])
  end
end

function test_self()
  return fn test|name|
    print(name)
    load(name)
  end
end

path = "../target/debug/moss"
# path = "valgrind ../target/debug/moss"
# path = "../target/release/moss"
# path = "moss"

test = test_extern(path)
# test = test_self()

tests = table{
  fast = true,
  medium = true,
  slow = false
}

if tests.fast
  test("test-basic")
  test("test-import")
  test("test-sudoku")
  test("test-la")
  test("test-generators")
  test("test-exceptions")
end

if tests.medium
  test("test-cf")
  test("test-la-inv")
  test("test-long")
end

if tests.slow
  test("test-la-inv-complex")
  # too slow in debug mode
end


